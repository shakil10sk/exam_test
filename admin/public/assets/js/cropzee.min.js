var dependencies='\x3c!-- light-modal --\x3e<link href="https://cdn.jsdelivr.net/gh/hunzaboy/Light-Modal@latest/dist/css/light-modal.min.css" rel="stylesheet">\x3c!-- animate.css --\x3e<link href="https://cdn.jsdelivr.net/gh/daneden/animate.css@latest/animate.min.css" rel="stylesheet">\x3c!-- canvas-toBlob.js --\x3e<script src="https://cdn.jsdelivr.net/gh/eligrey/canvas-toBlob.js@latest/canvas-toBlob.min.js" defer><\/script>\x3c!-- FileSaver.js --\x3e<script src="https://cdn.jsdelivr.net/gh/eligrey/FileSaver.js@latest/dist/FileSaver.min.js" defer><\/script>\x3c!-- Croppr.js --\x3e<link href="https://cdn.jsdelivr.net/gh/jamesssooi/Croppr.js@latest/dist/croppr.min.css" rel="stylesheet"><script src="https://cdn.jsdelivr.net/gh/jamesssooi/Croppr.js@latest/dist/croppr.min.js"><\/script>';function closeModal(){$("#cropzee-modal").remove(),window.location=window.location.pathname+"#"}$("body").after(dependencies),jQuery.fn.extend({cropzee:function(e={aspectRatio:null,maxSize:null,minSize:null,startSize:[100,100,"%"],onCropStart:null,onCropMove:null,onCropEnd:null,onInitialize:null,modalAnimation:"",allowedInputs:["gif","png","jpg","jpeg"],imageExtension:"image/jpeg",returnImageMode:"data-url"}){function a(e){$("#"+e).val(null)}function t(a,t){var o=e.modalAnimation;o&&-1==o.indexOf("animated")&&(o="animated "+o);var i='<div class="light-modal" id="cropzee-modal" style="z-index: 99999;" role="dialog" aria-labelledby="light-modal-label" aria-hidden="false" data-lightmodal="close"><div class="light-modal-content '+o+'">\x3c!-- light modal header --\x3e\x3c!-- <div class="light-modal-header"><h3 class="light-modal-heading">Cropzee</h3><a href="#" class="light-modal-close-icon" aria-label="close">&times;</a></div> --\x3e\x3c!-- light modal body --\x3e<div class="light-modal-body" style="max-height: 500px;"><img id="cropzee-modal-image" src="'+t+'"></div>\x3c!-- light modal footer --\x3e<div class="light-modal-footer" style="justify-content: space-between;"><div onclick="closeModal()" class="light-modal-close-btn" style="cursor: pointer;" aria-label="close">Cancel</div><div onclick="cropzeeRotateImage(`'+a+'`);" class="light-modal-close-btn" style="cursor: pointer;">Rotate 90deg</div><div onclick="cropzeeCreateImage(`'+a+'`);" class="light-modal-close-btn" style="cursor: pointer;">Done</div></div></div><canvas style="position: absolute; top: -99999px; left: -99999px;" id="cropzee-hidden-canvas"></canvas><a style="display:none;" id="cropzee-link"></a></div>';$("body").append(i),setTimeout((function(){var a=document.getElementById("cropzee-hidden-canvas").getContext("2d");a.canvas.width=cropzeeCanvasWidth,a.canvas.height=cropzeeCanvasHeight;var o=new Image;o.src=t,a.drawImage(o,0,0,cropzeeCanvasWidth,cropzeeCanvasHeight),setTimeout((function(){window.location=window.location.pathname+"#cropzee-modal",window.cropzeeCroppr=new Croppr("#cropzee-modal-image",{aspectRatio:e.aspectRatio,maxSize:e.maxSize,minSize:e.minSize,startSize:e.startSize,onCropStart:e.onCropStart,onCropMove:e.onCropMove,onCropEnd:e.onCropEnd,onInitialize:e.onInitialize,onCropMove:e.onCropMove})}),50)}),50)}e.aspectRatio<=0&&(e.aspectRatio=null),e.allowedInputs||(e.allowedInputs=["gif","png","jpg","jpeg"]),e.imageExtension||(e.imageExtension="image/jpeg"),e.returnImageMode||(e.returnImageMode="data-url"),window.cropzeeGetImage=function(e){return cropzeeReturnImage[e]},window.cropzeeRotateImage=function(a){cropzeeCroppr.destroy(),setTimeout((function(){var a=document.getElementById("cropzee-hidden-canvas"),t=a.getContext("2d"),o=a.toDataURL(),i=new Image;i.src=o,t.save(),t.translate(.5*cropzeeCanvasWidth,.5*cropzeeCanvasHeight),t.rotate(1.5708),t.translate(.5*-cropzeeCanvasWidth,.5*-cropzeeCanvasHeight),t.drawImage(i,0,0),t.restore(),setTimeout((function(){o=a.toDataURL(),i.src=o,$("#cropzee-modal-image").attr("src",o),cropzeeCroppr=new Croppr("#cropzee-modal-image",{aspectRatio:e.aspectRatio,maxSize:e.maxSize,minSize:e.minSize,startSize:e.startSize,onCropStart:e.onCropStart,onCropMove:e.onCropMove,onCropEnd:e.onCropEnd,onInitialize:e.onInitialize,onCropMove:e.onCropMove})}),50)}),50)},window.cropzeeCreateImage=function(a){var t=cropzeeCroppr.getValue(),o=document.getElementById("cropzee-hidden-canvas"),i=o.getContext("2d");i.canvas.width=t.width,i.canvas.height=t.height;var n=document.getElementsByClassName("croppr-image")[0];i.drawImage(n,t.x,t.y,t.width,t.height,0,0,t.width,t.height);for(let e=0;e<cropzeePreviewersLength;e++)cropzeePreviewCanvasContext[e].canvas.width=t.width,cropzeePreviewCanvasContext[e].canvas.height=t.height,cropzeePreviewCanvasContext[e].drawImage(n,t.x,t.y,t.width,t.height,0,0,t.width,t.height);"blob"==e.returnImageMode?o.toBlob((function(e){window.cropzeeReturnImage=[],cropzeeReturnImage[a]=e}),e.imageExtension):(window.cropzeeReturnImage=[],cropzeeReturnImage[a]=o.toDataURL(e.imageExtension)),closeModal()},$(document).click((function(e){$(e.target).is("#cropzee-modal")&&closeModal()})),$(this).click((function(){var o=$(this).attr("id");a(o),$(this).one("change",(function(){var i=$("#"+o).val().split(".").pop().toLowerCase();if(-1==$.inArray(i,e.allowedInputs))alert("invalid extension! Please check your input file and try again."),a(o);else{var n=$('[data-cropzee="'+o+'"]').attr("id"),r=$('[data-cropzee="'+o+'"]').attr("class");$('[data-cropzee="'+o+'"]').replaceWith('<canvas id="'+n+'" class="'+r+'" data-cropzee="'+o+'"></canvas>'),function(e,a){if(e.files&&e.files[0]){var o=new FileReader;o.onload=function(e){if(window.cropzeePreviewersLength=$('[data-cropzee="'+a+'"]').length,window.cropzeePreviewCanvas=[],window.cropzeePreviewCanvasContext=[],cropzeePreviewersLength)for(let t=0;t<cropzeePreviewersLength;t++){cropzeePreviewCanvas[t]=$('[data-cropzee="'+a+'"]')[t],cropzeePreviewCanvasContext[t]=cropzeePreviewCanvas[t].getContext("2d"),cropzeePreviewCanvasContext[t].canvas.width=$(cropzeePreviewCanvas[t]).width()||300,window.cropzeeCanvasWidth=$(cropzeePreviewCanvas[t]).width()||300,cropzeePreviewCanvasContext[t].canvas.height=$(cropzeePreviewCanvas[t]).height()||300,window.cropzeeCanvasHeight=$(cropzeePreviewCanvas[t]).height()||300;var o=new Image;o.onload=function(){cropzeePreviewCanvasContext[t].drawImage(o,0,0,cropzeeCanvasWidth,cropzeeCanvasHeight)},o.src=e.target.result}t(a,e.target.result)},o.readAsDataURL(e.files[0])}}(this,o)}}))}))}});