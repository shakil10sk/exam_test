var union_table,district_id,upazila_id,union_code,bdlocation,district_search_id,upazila_search_id,postoffice_search_id,url=$("meta[name = path]").attr("content"),csrf=$("mata[name = csrf-token]").attr("content");function get_location(t,a,e){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({url:url+"/global/get_location",type:"POST",dataType:"JSON",data:{parent_id:t,type:a},success:function(t){if("success"==t.status){var a="<option value=''>সিলেক্ট করুন</option>";t.data.forEach((function(t){a+="<option value='"+t.id+"'>"+t.bn_name+"</option>"})),$("#"+e).html(a)}else $("#"+e).html("<option value=''>Not Found</option>")}})}function union_list(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),union_table=$("#union_list_table").DataTable({scrollCollapse:!0,autoWidth:!1,responsive:!0,serverSide:!0,processing:!0,ajax:{dataType:"JSON",type:"post",url:url+"/super_admin/union_list_data",data:{district_id:district_id,upazila_id:upazila_id,union_code:union_code}},columns:[{data:null,render:function(){return union_table.page.info().start+union_table.column(0).nodes().length}},{data:"union_code",render:function(t,a,e){let n='<span class="badge rounded-pill bg-success">&nbsp;&nbsp;</span>&nbsp;';return+e.is_active||(n='<span class="badge rounded-pill bg-danger">&nbsp;&nbsp;</span>&nbsp;'),n+t}},{data:"bn_name"},{data:"username"},{data:"sub_domain"},{data:"mobile"},{data:null,render:function(t,a,e,n){return+t.is_active?status_button=" <a  href='"+url+"/super_admin/status-change/"+t.id+"' class='btn btn-sm btn-secondary'>ডিএকটিভেট</a> ":status_button=" <a  href='"+url+"/super_admin/status-change/"+t.id+"' class='btn btn-sm btn-success'>একটিভ</a> ","<a href='"+url+"/impersonate/user/"+t.username+"' data-toggle='tooltip' data-placement='top' title='Impersonate' class='btn btn-sm btn-primary'><i class='fa fa-user-secret fa-lg'></i>Login AS</a>"+status_button+" <a  href='"+url+"/super_admin/union_edit/"+t.id+"' class='btn btn-sm btn-warning'>এডিট</a>  <button data-id='"+t.id+"' class='btn btn-sm btn-danger delete_union_btn'>ডিলিট</button>"}}],columnDefs:[{targets:"datatable-nosort",orderable:!1}],lengthMenu:[[10,25,50,-1],[10,25,50,"All"]],language:{info:"_START_-_END_ of _TOTAL_ entries",searchPlaceholder:"Search"},dom:"Bfrtip",buttons:["copy","csv","pdf","print"]})}function union_list_search(){district_id=$("#district_id").val(),upazila_id=$("#upazila_id").val(),union_code=$("#union_code").val(),$("#union_list_table").dataTable().fnSettings().ajax.data.district_id=district_id,$("#union_list_table").dataTable().fnSettings().ajax.data.upazila_id=upazila_id,$("#union_list_table").dataTable().fnSettings().ajax.data.union_code=union_code,union_table.ajax.reload()}function bd_location_list(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),bdlocation=$("#bd_location_list_table").DataTable({scrollCollapse:!0,autoWidth:!1,responsive:!0,serverSide:!0,processing:!0,ajax:{dataType:"JSON",type:"post",url:url+"/super_admin/bd_location_list_data",data:{district_id:district_search_id,upazila_id:upazila_search_id,postoffice_id:postoffice_search_id}},columns:[{data:null,render:function(){return bdlocation.page.info().start+bdlocation.column(0).nodes().length}},{data:"dis_bn",render:function(t,a,e){return 2==e.type?e.post_bn:3==e.type?e.upa_bn:4==e.type?e.dis_bn:t}},{data:"upa_bn",render:function(t,a,e){return 2==e.type?null:3==e.type?e.post_bn:4==e.type?e.upa_bn:t}},{data:"post_bn",render:function(t,a,e){return 2==e.type||3==e.type?null:4==e.type?e.post_bn:t}},{data:null,render:function(t,a,e,n){return'<a href="javascript:void(0)" class="btn btn-warning btn-sm" onclick="edit_bd_location('+n.row+')"> <i class="fa fa-pencil"></i> Edit</a><button class="btn btn-danger btn-sm" onclick="bdlocation_delete('+t.id+')"><i class="fa fa-trash"></i> Delete</button>'}}],columnDefs:[{targets:"datatable-nosort",orderable:!1}],lengthMenu:[[10,25,50,-1],[10,25,50,"All"]],language:{info:"_START_-_END_ of _TOTAL_ entries",searchPlaceholder:"Search"}})}function bd_locatin_search(){district_search_id=$("#district_id").val(),upazila_search_id=$("#upazila_id").val(),postoffice_search_id=$("#postoffice_id").val(),$("#bd_location_list_table").dataTable().fnSettings().ajax.data.district_id=district_search_id,$("#bd_location_list_table").dataTable().fnSettings().ajax.data.upazila_id=upazila_search_id,$("#bd_location_list_table").dataTable().fnSettings().ajax.data.postoffice_id=postoffice_search_id,bdlocation.ajax.reload()}function add_bd_location(){$("#upazila_show").hide(),$("#save_button").show(),$("#update_button").hide(),$("#district").val(""),$("#upazila").val(""),$("#en_name").val(""),$("#bn_name").val(""),$("#post_code").val(""),$.ajax({url:url+"/global/get_location",type:"POST",dataType:"JSON",data:{},success:function(t){if("success"==t.status){var a="<option value=''>Select</option>";t.data.forEach((function(t){a+="<option value='"+t.id+"'>"+t.en_name+"</option>"})),$("#district").html(a)}$("#upazila_show").hide(),$("#show_post_code").hide()}}),$("#add_bdlocation_modal").modal("toggle")}function get_bd_upazila(t,a){$("#show_post_code").hide(),$.ajax({url:url+"/global/get_location",type:"POST",dataType:"JSON",data:{parent_id:t,type:a},success:function(t){if("success"==t.status){var a="<option value=''>সিলেক্ট করুন</option>";t.data.forEach((function(t){a+="<option value='"+t.id+"'>"+t.en_name+"</option>"})),$("#upazila_show").show(),$("#upazila").html(a)}else $("#upazila").html("<option value=''>Not Found</option>"),$("#upazila_show").hide()}})}function post_code_show(t){t>0?$("#show_post_code").show():$("#show_post_code").hide()}function bd_location_save(){var t=$("#district").val(),a=$("#upazila").val(),e=$("#en_name").val(),n=$("#bn_name").val(),o=$("#post_code").val(),i=!1;if(""==e?($("#en_name_error").html("Empty"),i=!0):$("#en_name_error").html(""),""==n?($("#bn_name_error").html("Empty"),i=!0):$("#bn_name_error").html(""),0!=i)return!1;$.ajax({url:url+"/super_admin/bd_location_save",dataType:"JSON",type:"POST",data:{district_id:t,upazila_id:a,en_name:e,bn_name:n,post_code:o},success:function(t){swal({title:"Response",text:t.message,type:t.status,showCancelButton:!1,showConfirmButton:!0,closeOnConfirm:!0,allowEscapeKey:!1}),bdlocation.ajax.reload()}}),$("#add_bdlocation_modal").modal("toggle")}function edit_bd_location(t){$("#save_button").hide(),$("#update_button").show();var a=bdlocation.row(t).data();$.ajax({url:url+"/global/get_location",type:"POST",dataType:"JSON",data:{},success:function(t){if("success"==t.status){var e,n="<option value=''>Select</option>";t.data.forEach((function(t){n+="<option value='"+t.id+"'>"+t.en_name+"</option>"})),$("#district").html(n),2==a.type?($("#en_name").val(a.post_en),$("#bn_name").val(a.post_bn),$("#show_post_code").hide(),$("#post_code").val("")):3==a.type?($("#district").val(a.parent_id),$("#en_name").val(a.post_en),$("#bn_name").val(a.post_bn),get_bd_upazila(a.parent_id,3),$("#show_post_code").hide(),$("#post_code").val("")):6==a.type&&(e=a.dis_id,a.upa_id,post_office_id=a.id,$("#district").val(a.dis_id),$("#en_name").val(a.post_en),$("#bn_name").val(a.post_bn),get_bd_upazila(e,3),setTimeout((function(){$("#upazila").val(a.upa_id)}),1500),$("#show_post_code").show(),$("#post_code").val(a.post_code)),$("#row_id").val(a.id)}$("#upazila_show").hide(),$("#show_postoffice").hide()}}),$("#add_bdlocation_modal").modal("toggle")}function bd_location_update_save(){var t=$("#row_id").val(),a=$("#district").val(),e=$("#upazila").val(),n=$("#en_name").val(),o=$("#bn_name").val(),i=$("#post_code").val(),s=!1;if(""==n?($("#en_name_error").html("Empty"),s=!0):$("#en_name_error").html(""),""==o?($("#bn_name_error").html("Empty"),s=!0):$("#bn_name_error").html(""),0!=s)return!1;$.ajax({url:url+"/super_admin/bd_location_update_save",dataType:"JSON",type:"POST",data:{district_id:a,upazila_id:e,en_name:n,bn_name:o,post_code:i,row_id:t},success:function(t){swal({title:"Response",text:t.message,type:t.status,showCancelButton:!1,showConfirmButton:!0,closeOnConfirm:!0,allowEscapeKey:!1}),bdlocation.ajax.reload()}}),$("#add_bdlocation_modal").modal("toggle")}function bdlocation_delete(t){swal({title:"অনুমোদন",text:"আপনি কি ডিলিট করতে চান?",type:"warning",showConfirmButton:!0,confirmButtonClass:"btn-success",confirmButtonText:"হ্যাঁ",showCancelButton:!0,cancelButtonText:"না",showLoaderOnConfirm:!0,preConfirm:function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({url:url+"/super_admin/bd_location_delete",type:"POST",dataType:"JSON",data:{id:t},success:function(t){swal({title:"ধন্যবাদ",text:t.status,type:"success",showCancelButton:!1,showConfirmButton:!0,confirmButtonText:"ঠিক আছে",closeOnConfirm:!0,allowEscapeKey:!1})}})}}).then((function(){bdlocation.ajax.reload()}))}function get_all_union(t,a){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({url:url+"/global/all_union_list",type:"POST",dataType:"JSON",data:{upazila_id:t},success:function(t){if("success"==t.status){var e="<option value=''>সিলেক্ট করুন</option>";t.data.forEach((function(t){e+="<option value='"+t.union_code+"'>"+t.bn_name+"</option>"})),$("#"+a).html(e)}else $("#"+a).html("<option value=''>Not Found</option>")}})}function get_fee_info(){var t=$("#union_id").val(),a=$("#voucher").val();$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({url:url+"/super_admin/get_fee_info",type:"POST",dataType:"JSON",data:{union_id:t,voucher:a},success:function(t){"success"==t.status?($(".fee_table").show(),$("#data_message").hide(),$("#credit_account").html(t.data.credit_account),$("#debit_account").html(t.data.debit_account),$("#voucher_no").html(t.data.voucher),$("#amount").val(t.data.amount),$("#row_id").val(t.data.id),$("#unionid").val(t.data.union_id),$("#created_time").html(t.data.created_time)):($("#data_message").show(),$(".fee_table").hide())}})}function update_fee(){var t=$("#row_id").val(),a=$("#unionid").val(),e=$("#amount").val();swal({title:"অনুমোদন",text:"আপনি কি ফি সংশোধন করতে চান?",type:"warning",showConfirmButton:!0,confirmButtonClass:"btn-success",confirmButtonText:"হ্যাঁ",showCancelButton:!0,cancelButtonText:"না",showLoaderOnConfirm:!0,preConfirm:function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({url:url+"/super_admin/fee_update",type:"POST",dataType:"JSON",data:{id:t,union_id:a,amount:e},success:function(t){swal({title:"success"==t.status?"ধন্যবাদ":"দুঃখিত",text:t.message,type:t.status,showCancelButton:!1,showConfirmButton:!0,confirmButtonText:"ঠিক আছে",closeOnConfirm:!0,allowEscapeKey:!1})}})}}).then((function(){}))}function delete_fee(){var t=$("#row_id").val(),a=$("#unionid").val();swal({title:"অনুমোদন",text:"আপনি কি ডিলিট করতে চান?",type:"warning",showConfirmButton:!0,confirmButtonClass:"btn-success",confirmButtonText:"হ্যাঁ",showCancelButton:!0,cancelButtonText:"না",showLoaderOnConfirm:!0,preConfirm:function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({url:url+"/super_admin/fee_delete",type:"POST",dataType:"JSON",data:{id:t,union_id:a},success:function(t){swal({title:"success"==t.status?"ধন্যবাদ":"দুঃখিত",text:t.message,type:t.status,showCancelButton:!1,showConfirmButton:!0,confirmButtonText:"ঠিক আছে",closeOnConfirm:!0,allowEscapeKey:!1})}})}}).then((function(){location.reload()}))}function get_trade_fee_info(){var t=$("#union_id").val(),a=$("#voucher").val();$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({url:url+"/super_admin/get_trade_fee_info",type:"POST",dataType:"JSON",data:{union_id:t,voucher:a},success:function(t){"success"==t.status?($(".fee_table").show(),$("#data_message").hide(),$("#row_id").val(t.data.id),$("#unionid").val(t.data.union_id),$("#created_time").html(t.data.created_time)):($("#data_message").show(),$(".fee_table").hide())}})}