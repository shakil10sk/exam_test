var yearlyincome_table,from_date,to_date,yearlyincome_certi_table,url=$("meta[name = path]").attr("content"),csrf=$("mata[name = csrf-token]").attr("content");function yearlyincome_applicant_list(){from_date=$("#from_date").val(),to_date=$("#to_date").val(),yearlyincome_table=$("#yearlyincome_applicant_table").DataTable({scrollCollapse:!0,autoWidth:!1,responsive:!0,serverSide:!0,processing:!0,ajax:{dataType:"JSON",type:"post",url:yearlyincome_applicant_data_url,data:{from_date:from_date,to_date:to_date,_token:yearlyincome_applicant_csrf}},columns:[{data:null,render:function(){return yearlyincome_table.page.info().start+yearlyincome_table.column(0).nodes().length}},{data:null,render:function(a,e,t){return"<img width='50' src='"+img_path+"/"+a.photo+"' class='img-circle img-responsive' />"}},{data:null,render:function(a,e,t){return"<a class='link_color'  href='edit/"+a.tracking+"'>"+a.name_bn+"</a>"}},{data:"father_name_bn"},{data:"tracking"},{data:"pin"},{data:"mobile"},{data:"created_time"},{data:null,render:function(a,e,t,n){var o="",i="",r="";return $("#generate").val()&&(r="<a  href='javascript:void(0)' onclick='yearlyincome_generate("+n.row+")' ><p class='btn btn-sm btn-primary'>জেনারেট</p></a> "),$("#edit").val()&&(o="<a  href='edit/"+a.tracking+"'><p class='btn btn-sm btn-warning'>এডিট</p></a> "),$("#delete").val()&&(i="<a  href='javascript:void(0)'><p class='btn btn-sm btn-danger' onclick='yearlyincome_delete("+a.application_id+")' >ডিলিট</p></a> "),r+o+"<a  href='preview/"+a.tracking+"' target='_blank'><p class='btn btn-sm btn-success'>আবেদন প্র্রিন্ট</p></a> "+i}}],columnDefs:[{targets:"datatable-nosort",orderable:!1}],lengthMenu:[[10,25,50,-1],[10,25,50,"All"]],language:{info:"_START_-_END_ of _TOTAL_ entries",searchPlaceholder:"Search"},dom:"Bfrtip",buttons:["copy","csv","pdf","print"]})}function applicant_list_search(){from_date=$("#from_date").val(),to_date=$("#to_date").val(),$("#yearlyincome_applicant_table").dataTable().fnSettings().ajax.data.from_date=from_date,$("#yearlyincome_applicant_table").dataTable().fnSettings().ajax.data.to_date=to_date,yearlyincome_table.ajax.reload()}function account_list(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({url:url+"/global/account_list",type:"POST",dataType:"JSON",data:{},success:function(a){var e;"success"==a.status&&(a.data.forEach((function(a){28==a.id?e+='<option value ="'+a.id+'"> বার্ষিক আয়ের সনদ</option>':e+='<option value ="'+a.id+'">'+a.account_name+"</option>"})),$("#account").html(e))}})}function yearlyincome_generate(a){var e=yearlyincome_table.row(a).data();account_list(),$("#tracking").val(e.tracking),$("#pin").val(e.pin),$("#name").val(e.name_bn),$("#application_id").val(e.application_id),$("#union_id").val(e.union_id),$("#upazila_id").val(e.permanent_upazila_id),$("#district_id").val(e.permanent_district_id),$("#yearlyincome_generate_modal").modal("show")}function generate_save(){var a=$("#tracking").val(),e=$("#pin").val(),t=$("#application_id").val(),n=$("#account").val(),o=$("#fee").val(),i=$("#yearlyincome_generate_date").val(),r=$("#union_id").val(),l=$("#upazila_id").val(),c=$("#district_id").val();swal({title:"অনুমোদন",text:"আপনি কি সনদটি জেনারেট করতে চান ?",type:"warning",showConfirmButton:!0,confirmButtonClass:"btn-success",confirmButtonText:"হ্যাঁ",showCancelButton:!0,cancelButtonText:"না",showLoaderOnConfirm:!0,preConfirm:function(){$.ajax({url:yearlyincome_generate_url,type:"POST",dataType:"JSON",data:{tracking:a,pin:e,credit_id:n,fee:o,generate_date:i,union_id:r,upazila_id:l,district_id:c,application_id:t,_token:yearlyincome_generate_csrf},success:function(a){$("#yearlyincome_generate_modal").modal("hide"),swal({title:"ধন্যবাদ",text:a.message,type:a.status,showCancelButton:!0,cancelButtonText:"বাতিল",showConfirmButton:!0,confirmButtonText:'<a href="'+yearlyincome_bangla_sonod_url+"/"+a.sonod_no+'" target="_blank">প্রিন্ট করুন</a>',closeOnConfirm:!0,allowEscapeKey:!1}),yearlyincome_table.ajax.reload()}})}}).then((function(){}))}function yearlyincome_delete(a){swal({title:"অনুমোদন",text:"আপনি কি আবেদনটি ডিলিট করতে চান?",type:"warning",showConfirmButton:!0,confirmButtonClass:"btn-success",confirmButtonText:"হ্যাঁ",showCancelButton:!0,cancelButtonText:"না",showLoaderOnConfirm:!0,preConfirm:function(){$.ajax({url:yearlyincome_delete_url,type:"POST",dataType:"JSON",data:{deleteId:a,_token:yearlyincome_delete_csrf},success:function(a){swal({title:"মোছা হয়েছে!",text:a.message,type:a.status,showCancelButton:!1,showConfirmButton:!0,confirmButtonText:"ঠিক আছে",closeOnConfirm:!0,allowEscapeKey:!1})}})}}).then((function(){yearlyincome_table.ajax.reload()}))}function yearlyincome_certificate_list(){from_date=$("#from_date").val(),to_date=$("#to_date").val(),yearlyincome_certi_table=$("#yearlyincome_certificate_table").DataTable({scrollCollapse:!0,autoWidth:!1,responsive:!0,serverSide:!0,processing:!0,ajax:{type:"post",url:yearlyincome_certificate_data_url,data:{from_date:from_date,to_date:to_date,_token:yearlyincome_certificate_csrf}},columns:[{data:null,render:function(){return yearlyincome_certi_table.page.info().start+yearlyincome_certi_table.column(0).nodes().length}},{data:null,render:function(a,e,t){return"<img width='50' src='"+img_path+"/"+a.photo+"' class='img-circle img-responsive' />"}},{data:null,render:function(a,e,t){return"<a class='link_color' href='edit/"+a.tracking+"'>"+a.name_bn+"</a>"}},{data:"tracking"},{data:"pin"},{data:null,render:function(a,e,t){return String(a.sonod_no)}},{data:"mobile"},{data:"generate_date"},{data:null,render:function(a,e,t,n){var o="",i="",r="";return $("#regenerate").val()&&(i="<a  href='javascript:void(0)' onclick='yearlyincome_regenerate("+n.row+")' ><p class='btn btn-sm btn-primary custom_button'>রি-জেনারেট</p></a> "),$("#edit").val()&&(o="<a  href='edit/"+a.tracking+"'><p class='btn btn-sm btn-warning' >এডিট</p></a> "),$("#invoice").val()&&(r="<a  href='money_receipt/"+a.sonod_no+"' target='_blank'><p class='btn btn-sm custom_button_violet'>রশিদ</p></a>"),"<a  href='print_bn/"+a.sonod_no+"' target='_blank' ><p class='btn btn-sm btn-primary '>বাংলা</p></a>  <a  href='print_en/"+a.sonod_no+"' target='_blank' ><p class='btn btn-sm btn-success'>ইংরেজি</p></a> "+o+i+r}}],columnDefs:[{targets:"datatable-nosort",orderable:!1}],lengthMenu:[[10,25,50,-1],[10,25,50,"All"]],language:{info:"_START_-_END_ of _TOTAL_ entries",searchPlaceholder:"Search"},dom:"Bfrtip",buttons:["copy","csv","pdf","print"]})}function certificate_list_search(){from_date=$("#from_date").val(),to_date=$("#to_date").val(),$("#yearlyincome_certificate_table").dataTable().fnSettings().ajax.data.from_date=from_date,$("#yearlyincome_certificate_table").dataTable().fnSettings().ajax.data.to_date=to_date,yearlyincome_certi_table.ajax.reload()}function yearlyincome_regenerate(a){var e=yearlyincome_certi_table.row(a).data();account_list(),$("#sonod_no").val(e.sonod_no),$("#tracking").val(e.tracking),$("#pin").val(e.pin),$("#name").val(e.name_bn),$("#application_id").val(e.application_id),$("#union_id").val(e.union_id),$("#upazila_id").val(e.permanent_upazila_id),$("#district_id").val(e.permanent_district_id),$("#yearlyincome_regenerate_modal").modal("show")}function regenerate_save(){var a=$("#tracking").val(),e=$("#sonod_no").val(),t=$("#pin").val(),n=$("#application_id").val(),o=$("#account").val(),i=$("#fee").val(),r=$("#yearlyincome_generate_date").val(),l=$("#union_id").val(),c=$("#upazila_id").val(),_=$("#district_id").val();swal({title:"অনুমোদন",text:"আপনি কি সনদটি রি-জেনারেট করতে চান?",type:"warning",showConfirmButton:!0,confirmButtonClass:"btn-success",confirmButtonText:"হ্যাঁ",showCancelButton:!0,cancelButtonText:"না",showLoaderOnConfirm:!0,preConfirm:function(){$.ajax({url:yearlyincome_regenerate_url,type:"POST",dataType:"JSON",data:{tracking:a,sonod_no:e,pin:t,credit_id:o,fee:i,generate_date:r,union_id:l,upazila_id:c,district_id:_,application_id:n,_token:yearlyincome_regenerate_csrf},success:function(a){$("#yearlyincome_regenerate_modal").modal("hide"),swal({title:"ধন্যবাদ",text:a.message,type:a.status,showCancelButton:!0,cancelButtonText:"বাতিল",showConfirmButton:!0,confirmButtonText:'<a href="'+yearlyincome_bangla_sonod_url+"/"+a.sonod_no+'" target="_blank">প্রিন্ট করুন</a>',closeOnConfirm:!0,allowEscapeKey:!1}),yearlyincome_certi_table.ajax.reload()}})}}).then((function(){}))}setTimeout((function(){$(".alert-success").hide("slow")}),3e3),$("#yearlyincome_generate_date, #from_date, #to_date").datepicker({language:"en",autoClose:!0,dateFormat:"yyyy-mm-dd"});