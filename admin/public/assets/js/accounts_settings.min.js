var account_table,fund_table,url=$("meta[name = path]").attr("content"),csrf=$("mata[name = csrf-token]").attr("content");function account_list(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),account_table=$("#account_table").DataTable({scrollCollapse:!0,autoWidth:!1,responsive:!0,serverSide:!0,processing:!0,ajax:{dataType:"JSON",type:"post",url:url+"/accounts/account_list_data",data:{}},columns:[{data:null,render:function(){return account_table.page.info().start+account_table.column(0).nodes().length}},{data:"account_name"},{data:"account_code"},{data:"amount"},{data:null,render:function(t,a,e,n){let o="";return $("#delete-accounts").val()&&(o=" <a  href='javascript:void(0)'><p class='btn btn-sm btn-danger' onclick='account_delete("+n.row+")' >ডিলিট</p></a>"),""+o}}],columnDefs:[{targets:"datatable-nosort",orderable:!1}],lengthMenu:[[10,25,50,-1],[10,25,50,"All"]],language:{info:"_START_-_END_ of _TOTAL_ entries",searchPlaceholder:"Search"},dom:"Bfrtip",buttons:["copy","csv","pdf","print"]})}function add_account(){$("#account_name").val(""),$("#account_code").val(""),$("#opening_balance").val(""),$("#head_type").val(""),$("#account_name_error").html(""),$("#account_code_error").html(""),$("#save_button").show(),$("#update_button").hide(),$("#account_save_modal").modal("show")}function account_save(){var t=$("#account_name").val(),a=$("#account_code").val(),e=$("#head_type").val(),n=$("#opening_balance").val(),o=!1;if(""==t?($("#account_name_error").html("একাউন্ট নাম দিতে হবে।"),o=!0):$("#account_name_error").html(""),""==a?($("#account_code_error").html("একাউন্ট কোড দিতে হবে।"),o=!0):$("#account_code_error").html(""),1==o)return!1;swal({title:"অনুমোদন",text:"আপনি কি একাউন্ট টি যোগ করতে চান ?",type:"warning",showConfirmButton:!0,confirmButtonClass:"btn-success",confirmButtonText:"হ্যাঁ",showCancelButton:!0,cancelButtonText:"না",showLoaderOnConfirm:!0,preConfirm:function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({url:url+"/accounts/account_save",type:"POST",dataType:"JSON",data:{account_name:t,account_code:a,opening_balance:n,head_type:e},success:function(t){t.errors&&(t.errors.account_name&&$("#account_name_error").html(t.errors.account_name[0]),t.errors.account_code&&$("#account_code_error").html(t.errors.account_code[0])),"error"!=t.status&&"success"!=t.status||($("#account_save_modal").modal("hide"),swal({title:"ধন্যবাদ",text:t.message,type:t.status,showCancelButton:!0,cancelButtonText:"বাতিল",showConfirmButton:!0,closeOnConfirm:!0,allowEscapeKey:!1}),account_table.ajax.reload())}})}}).then((function(){}))}function account_edit(t){$("#opening_balance").html(""),$("#account_name_error").html(""),$("#account_code_error").html("");var a=account_table.row(t).data();$("#account_name").val(a.account_name),$("#account_code").val(a.account_code),$("#opening_balance").val(a.amount),setTimeout((function(){$("#head_type").val(a.parent_id)}),1e3),$("#row_id").val(a.id),$("#transection_id").val(a.transection_id),$("#update_button").show(),$("#save_button").hide(),$("#account_save_modal").modal("show")}function account_update(){var t=$("#account_name").val(),a=$("#account_code").val(),e=$("#opening_balance").val(),n=$("#head_type").val(),o=$("#row_id").val(),c=$("#transection_id").val(),r=!1;if(""==t?($("#account_name_error").html("একাউন্ট নাম দিতে হবে।"),r=!0):$("#account_name_error").html(""),""==a?($("#account_code_error").html("একাউন্ট কোড দিতে হবে।"),r=!0):$("#account_code_error").html(""),1==r)return!1;swal({title:"অনুমোদন",text:"আপনি কি একাউন্ট টি আপডেট করতে চান ?",type:"warning",showConfirmButton:!0,confirmButtonClass:"btn-success",confirmButtonText:"হ্যাঁ",showCancelButton:!0,cancelButtonText:"না",showLoaderOnConfirm:!0,preConfirm:function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({url:url+"/accounts/account_update",type:"POST",dataType:"JSON",data:{account_name:t,account_code:a,opening_balance:e,head_type:n,row_id:o,transection_id:c},success:function(t){t.errors&&(t.errors.account_name&&$("#account_name_error").html(t.errors.account_name[0]),t.errors.account_code&&$("#account_code_error").html(t.errors.account_code[0])),"error"!=t.status&&"success"!=t.status||($("#account_save_modal").modal("hide"),swal({title:"ধন্যবাদ",text:t.message,type:t.status,showCancelButton:!0,cancelButtonText:"বাতিল",showConfirmButton:!0,closeOnConfirm:!0,allowEscapeKey:!1}),account_table.ajax.reload())}})}}).then((function(){}))}function account_delete(t){var a=account_table.row(t).data();swal({title:"অনুমোদন",text:"আপনি কি ডিলিট করতে চান?",type:"warning",showConfirmButton:!0,confirmButtonClass:"btn-success",confirmButtonText:"হ্যাঁ",showCancelButton:!0,cancelButtonText:"না",showLoaderOnConfirm:!0,preConfirm:function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({url:url+"/accounts/account_delete",type:"POST",dataType:"JSON",data:{id:a.id},success:function(t){swal({title:"ধন্যবাদ",text:t.status,type:"success",showCancelButton:!1,showConfirmButton:!0,confirmButtonText:"ঠিক আছে",closeOnConfirm:!0,allowEscapeKey:!1})}})}}).then((function(){account_table.ajax.reload()}))}function get_subcategoy(t,a,e,n){if(t>0)$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({url:url+"/accounts/acc_subcategory",type:"POST",dataType:"JSON",data:{id:t},success:function(t){if(t.length>0){$("#"+e).css("display","block"),$("#"+n).css("display","block");var o="<option value='' >সিলেক্ট </option>";t.forEach((function(t){o+="<option value='"+t.id+"'>"+t.account_name+"</option>"})),$("#"+a).html(o)}else{o="<option value='' >সিলেক্ট </option>";$("#"+a).html(""),$("#"+e).css("display","none"),$("#"+n).css("display","none")}}});else{$("#sub_head_error").html("");$("#"+a).html(""),$("#"+e).css("display","none"),$("#"+n).css("display","none")}}function add_fund(){$("#head").val(""),$("#sub_head").val(""),$("#amount").val(""),$("#sub_label").css("display","none"),$("#sub_select").css("display","none"),$("#head_error").html(""),$("#sub_head_error").html(""),$("#amount_error").html(""),$("#comment_error").html(""),$("#save_button").show(),$("#update_button").hide(),$("#fund_modal").modal("show")}function fund_list(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),fund_table=$("#fund_table").DataTable({scrollCollapse:!0,autoWidth:!1,responsive:!0,serverSide:!0,processing:!0,ajax:{dataType:"JSON",type:"post",url:url+"/accounts/fund_list_data",data:{}},columns:[{data:null,render:function(){return fund_table.page.info().start+fund_table.column(0).nodes().length}},{data:"account_name"},{data:"amount"},{data:"comment"},{data:"created_time"},{data:null,render:function(t,a,e,n){let o="";return $("#edit_fund").val()&&(o="<a  href='javascript:void(0)'><p class='btn btn-sm btn-warning' onclick='fund_edit("+n.row+")'>এডিট</p></a>"),$("#delete_fund").val(),o+""}}],columnDefs:[{targets:"datatable-nosort",orderable:!1}],lengthMenu:[[10,25,50,-1],[10,25,50,"All"]],language:{info:"_START_-_END_ of _TOTAL_ entries",searchPlaceholder:"Search"},dom:"Bfrtip",buttons:["copy","csv","pdf","print"]})}function fund_store(){var t=$("#head").val(),a=$(".sub_head").val(),e=$("#comment").val(),n=$("#amount").val(),o=!1;""==t?($("#head_error").html(" প্রধান খাত  প্রদান করুন"),o=!0):(""==a?($("#sub_head_error").html("সাব খাত  প্রদান করুন"),o=!0):$("#sub_head_error").html(""),$("#head_error").html("")),""==n?$("#amount_error").html("টাকার পরিমান"):$("#amount_error").html(""),""==e?($("#comment_error").html("বিস্তারিত লিখুন"),o=!0):$("#comment_error").html(""),0==o&&($.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({url:url+"/accounts/fund_store",type:"POST",dataType:"JSON",data:{head:t,sub_head:a,amount:n,comment:e},success:function(t){swal({icon:t.status,text:t.message}),$("#fund_modal").modal("hide"),fund_table.ajax.reload()}}))}function fund_edit(t){$("#head_error").html(""),$("#sub_head_error").html(""),$("#amount_error").html(""),$("#comment_error").html("");var a=fund_table.row(t).data();$("#amount").val(a.amount),$("#comment").val(a.comment),setTimeout((function(){a.parent_id>0?(get_subcategoy(a.parent_id,"sub_select","sub_label","sub_select"),$("#head").val(a.parent_id),setTimeout((function(){$(".sub_head").val(a.id)}),1e3)):($("#head").val(a.id),$("#sub_label").css("display","none"),$("#sub_select").css("display","none"))}),1e3),$("#row_id").val(a.id),$("#transection_id").val(a.transection_id),$("#update_button").show(),$("#save_button").hide(),$("#fund_modal").modal("show")}function fund_update_save(){var t=$("#head").val(),a=$(".sub_head").val(),e=$("#comment").val(),n=$("#amount").val(),o=$("#transection_id").val(),c=!1;""==t?($("#head_error").html(" প্রধান খাত  প্রদান করুন"),c=!0):(""==a?($("#sub_head_error").html("সাব খাত  প্রদান করুন"),c=!0):$("#sub_head_error").html(""),$("#head_error").html("")),""==n?$("#amount_error").html("টাকার পরিমান"):$("#amount_error").html(""),""==e?($("#comment_error").html("বিস্তারিত লিখুন"),c=!0):$("#comment_error").html(""),0==c&&($.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({url:url+"/accounts/fund_update_save",type:"POST",dataType:"JSON",data:{head:t,sub_head:a,amount:n,transection_id:o,comment:e},success:function(t){swal({icon:t.status,text:t.message}),$("#fund_modal").modal("hide"),fund_table.ajax.reload()}}))}setTimeout((function(){$(".alert-success").hide("slow")}),3e3);